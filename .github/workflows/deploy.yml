...
    - name: Deploy code to EC2
      run: |
        ssh -o StrictHostKeyChecking=no ${{ secrets.USERNAME }}@${{ secrets.HOST }} << 'EOF'
          set -e

          echo "🔁 Pulling latest code..."
          cd ${{ secrets.APP_DIR }}
          git pull origin main

          echo "🔨 Building Java backend..."
          cd crud_Operation
          chmod +x mvnw     # 👈 Add this line to fix the permission error
          ./mvnw clean package -DskipTests

          echo "🛑 Stopping old Java process..."
          pkill -f 'crud_Operation-0.0.1-SNAPSHOT.jar' || true

          echo "🚀 Starting backend..."
          nohup java -jar target/*-SNAPSHOT.jar > backend.log 2>&1 &

          echo "📦 Installing frontend dependencies..."
          cd ../client
          npm install

          echo "🛠 Building frontend..."
          npm run dev

          echo "✅ Fullstack Java + React app deployed!"
        EOF
